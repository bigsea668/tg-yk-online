import{d as H,t as m,y as k,B as O,o as b,b as w,X as n,a3 as t,i as s,e as l,a8 as V,H as N,h as X,Y as _,as as q,ac as G,$ as J,a9 as h}from"./index-SkQIWFxF.js";import{e as Q,v as W}from"./el-select-aoHRwLzr.js";import{E as Z,a as ee}from"./el-form-item-DjY6-g6w.js";import{E as te}from"./el-pagination-BZTeeDdF.js";import"./el-tag-C-Ar2SHx.js";import"./el-scrollbar-B_RdZN1g.js";import{E as le,a as ae}from"./el-table-column-DFYlF3gl.js";import"./el-checkbox-oKrozKwu.js";import"./el-tooltip-l0sNRNKZ.js";import{E as oe}from"./el-popover-B_wffsG6.js";import{E as ne}from"./el-button-CaCwkDis.js";import{I as E}from"./iconify-BwnrVFpF.js";import{m as se,h as ie,n as re}from"./material-Co1NEuoq.js";import{E as de}from"./index-CduaMGvE.js";import"./index-DMdzZa0p.js";import"./use-form-item-OJvLHTB4.js";import"./refs-C2TW7dIb.js";import"./_Uint8Array-BK-oSTMd.js";import"./_initCloneObject-C4kFkGVc.js";const pe={class:"grid grid-cols-12 gap-4 mt-1"},ue={class:"col-span-2 bg-white rounded-md p-4"},me={class:"mr-4",style:{width:"100%"}},ce={class:"mt-2"},fe={class:"col-span-10 bg-white rounded-md p-4"},ge={style:{height:"82.5vh"}},ve={class:"mt-4"},be={key:0,style:{color:"red"}},_e={class:"dialog-footer"},Re=H({__name:"label",setup(he){const d=m(!1),f=m(!1),c=k({label:""});function U(){f.value=!0}function L(){if(d.value=!0,!T(c.label)){d.value=!1;return}const i={Label:c.label};se(i).then(e=>{e.data,v(),h.success("新增标签成功")}).catch(e=>{h.error("新增标签失败")}).finally(()=>{d.value=!1}),y()}function y(){d.value=!1,f.value=!1,c.label=""}const C=m(!1);function T(i){let e=0,o=0;for(let z of i)/[\u4e00-\u9fff]/.test(z)?e++:o++;const p=e>5,u=o>9;return C.value=p||u,(p||u)&&h({message:p?"汉字不能超过5个":"英文、数字及其他字符不能超过9个",type:"warning"}),!C.value}const g=m(""),x=m([]);function v(){d.value=!0;const i={Like:g.value,pageNum:r.pageNum,pageSize:r.pageSize};ie(i).then(e=>{try{x.value=e.data.data.data.map((o,p)=>({...o,ids:p+1})),r.total=e.data.data.totalCount}catch{}}).catch(e=>{}).finally(()=>{d.value=!1})}function B(i){d.value=!0;const e={id:i.id};re(e).then(o=>{h({message:"删除标签成功",type:"success"}),v()}).catch(o=>{o.data}).finally(()=>{d.value=!1})}const I=()=>{},r=k({pageSizes:[1,10,20,50],pageSize:10,pageNum:1,total:400}),D=i=>{},F=i=>{},M=m(),P=m([]),A=i=>{P.value=i};return O(()=>{v()}),(i,e)=>{const o=ne,p=de,u=le,z=oe,R=ae,$=te,K=Z,Y=ee,j=Q,S=W;return b(),w("div",pe,[n("div",ue,[n("div",null,[e[10]||(e[10]=n("div",{class:"mb-4 px-2 py-2",style:{"border-bottom":"1px dashed #ccc"}}," 客户标签 ",-1)),n("div",null,[n("div",me,[t(p,{modelValue:l(g),"onUpdate:modelValue":e[0]||(e[0]=a=>V(g)?g.value=a:null),style:{"max-width":"230px"},placeholder:"Please input",class:"input-with-select"},{append:s(()=>[t(o,{type:"primary",plain:"",onClick:v},{default:s(()=>[t(l(E),{icon:"mingcute:search-fill",style:{"font-size":"22px"}})]),_:1})]),_:1},8,["modelValue"])]),n("div",ce,[t(o,{type:"primary",plain:"",class:"w-full overflow-hidden text-overflow-ellipsis",onClick:U},{default:s(()=>[t(l(E),{icon:"mdi:tag-plus-outline",style:{"font-size":"22px"}}),e[8]||(e[8]=n("span",{class:"hidden lg:inline-block ml-2"},"新增标签",-1)),e[9]||(e[9]=n("span",{class:"hidden md:inline-block lg:hidden ml-2"},"新增标签",-1))]),_:1})])])])]),N((b(),w("div",fe,[n("div",null,[n("div",ge,[N((b(),X(R,{ref_key:"tableRef",ref:M,data:l(x),style:{width:"100%"},border:"",onSelectionChange:A,height:"full"},{default:s(()=>[t(u,{type:"selection",width:"55"}),t(u,{prop:"ids",label:"ID"}),t(u,{prop:"name",label:"标签"}),t(u,{prop:"createTime",label:"标签创建时间"}),t(u,{width:"220"},{header:s(()=>e[11]||(e[11]=[n("div",{class:"must"},[n("span",{class:"red"}),_("操作")],-1)])),default:s(a=>[t(z,{"confirm-button-text":"Yes","cancel-button-text":"No","icon-color":"#626AEF",title:i.$t("userMarger.user.areSureDel"),onConfirm:ye=>B(a.row),onCancel:I},{reference:s(()=>[t(o,{size:"small",type:"danger",plain:""},{default:s(()=>[t(l(E),{icon:"mdi-light:delete",style:{"font-size":"18px"}}),e[12]||(e[12]=_(" 删除标签 "))]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"])),[[S,l(d)]])]),n("div",ve,[t($,{"current-page":l(r).pageNum,"onUpdate:currentPage":e[1]||(e[1]=a=>l(r).pageNum=a),"page-size":l(r).pageSize,"onUpdate:pageSize":e[2]||(e[2]=a=>l(r).pageSize=a),"page-sizes":l(r).pageSizes,"onUpdate:pageSizes":e[3]||(e[3]=a=>l(r).pageSizes=a),total:l(r).total,"onUpdate:total":e[4]||(e[4]=a=>l(r).total=a),size:"default",background:!0,layout:"total, sizes, prev, pager, next, jumper","default-current-page":1,onSizeChange:D,onCurrentChange:F},null,8,["current-page","page-size","page-sizes","total"])])])])),[[S,l(d)]]),t(j,{modelValue:l(f),"onUpdate:modelValue":e[7]||(e[7]=a=>V(f)?f.value=a:null),title:"新增标签",width:"500",onClose:y},{footer:s(()=>[n("div",_e,[t(o,{onClick:y},{default:s(()=>e[13]||(e[13]=[_("Cancel")])),_:1}),t(o,{type:"primary",onClick:L},{default:s(()=>e[14]||(e[14]=[_("新增")])),_:1})])]),default:s(()=>[t(Y,{inline:!0,model:l(c),class:"demo-form-inline"},{default:s(()=>[t(K,{label:"标签素材",prop:"label"},{default:s(()=>[t(p,{modelValue:l(c).label,"onUpdate:modelValue":e[5]||(e[5]=a=>l(c).label=a),placeholder:"输入标签内容",clearable:"",style:{width:"240px"},onKeydown:e[6]||(e[6]=q(G(()=>{},["prevent"]),["enter"]))},null,8,["modelValue"])]),_:1}),l(C)?(b(),w("p",be,"您输入的内容超出了限制。")):J("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{Re as default};
